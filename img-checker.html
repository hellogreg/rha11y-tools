<!DOCTYPE html>
<html lang="en">
  <!-- https://rha11y-tools.netlify.app/ -->
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rha11y-img-checker bookmarklet demo</title>
    <link rel="stylesheet" href="rha11y-tools.css" rel="stylesheet" />
    <script src="img-components.js"></script>
  </head>
  <body>
    <div class="demo-page">
      <h1><span class="rh-text">rha11y-img-checker</span> demo</h1>
      <p><a href="index.html">Return to the rha11y-tools homepage</a></p>
      <h2>Getting the bookmarklet</h2>
      <p>
        To get the rha11y-img-checker bookmarklet, drag the following link to your bookmarks bar.
        You may also click the link directly to use it on this page for testing. (Refresh the page
        to reset it.)
      </p>
      <p>
        <strong
          ><a
            class="book-link"
            href='javascript:(()=>{let e=!0;function t(t,n){e&&(t=void 0!==t?t:" ",n?console.log(t,n):console.log(t))}function n(t){e&&t&&console.dir(t)}function i(e){e?console.group(e):console.group()}function o(e){e?console.groupCollapsed(e):console.groupCollapsed()}function r(){console.groupEnd()}function l(e,t){e.setAttribute("data-a11y","Accessible: "+!!t),e.style.setProperty("outline",(t?"#09fd":"#f90d")+" solid 8px","important"),e.style.setProperty("outline-offset","-4px","important"),e.style.setProperty("border-radius","2px","important"),e.style.setProperty("filter","initial","important")}function a(e){return"img"===e.nodeName.toLowerCase()}function d(e){return"svg"===e.nodeName.toLowerCase()}function u(e){return!!e.shadowRoot}function s(e){return e=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.getRootNode().host:e}function c(e){let n=!1,i=e.nodeName;o("Checking if "+i.toLowerCase()+" is hidden");let l=!!e.hidden;n=n||l,t("hidden attribute: "+l);let d="none"===getComputedStyle(e).display;n=n||d,t("display:none: "+d);let u="hidden"===getComputedStyle(e).visibility;n=n||u,t("visbility:hidden: "+u);let s=!!e.ariaHidden||"true"===e.getAttribute("aria-hidden");if(n=n||s,t("aria-hidden: "+s),a(e)){let c="presentation"===e.getAttribute("role");n=n||c,t("role=presentation img: "+c)}return r(),!!n}function f(e){function n(e){return!!e&&"BODY"!==e.nodeName&&"HTML"!==e.nodeName&&e.nodeType!==Node.DOCUMENT_NODE&&e.nodeName}e=s(e);let i=!1;for(o("Checking if <img> or parent is hidden from assistive tech");!i&&n(e);)i=i||c(e),e=s(e=e.parentNode?e.parentNode:null),!i&&n(e)&&t("Not hidden. Checking next parent: "+e.nodeName.toLowerCase());return r(),t("Either element or a parent is hidden: "+!!i),!!i}function g(e){let n=!!e.hasAttribute("alt");if(t("Has alt attribute: "+n),n){let i=e.getAttribute("alt")||"[decorative]";t("Image alt value: "+i)}return!!n}function b(e){let n="title"===e.firstElementChild.tagName&&!!e.firstElementChild.textContent;return t("Has <title>: "+!!n),n&&t("title: "+e.firstElementChild.textContent),!!n}function m(e){let n="img"===e.getAttribute("role");return t("Has role=img (not required/sufficient on its own): "+!!n),!!n}function h(e){let n=e.ariaLabel||e.getAttribute("aria-label"),i=!!n;return t("Has aria-label: "+i),i&&t("aria-label: "+n),!!i}function p(e){let t=document.getElementById(e);return t?t.textContent:null}function y(e){let n=e.ariaLabelledby||e.getAttribute("aria-labelledby"),i=!!n;t("Has aria-labelledby: "+i);let o,r=null;return i&&(r=!!(o=p(n)),t("aria-labelledby id: "+n),t("aria-labelledby value: "+o)),!!i}function N(e){let n=!1;t(e.outerHTML),i("Checking if <img> has an alt attribute"),n=n||g(e),r(),n||(n=f(e)),t("%c<img> is accessible: "+n,"font-weight:bold;color:#900;"),l(e,n)}function C(e){let n=!1;t(e.outerHTML),i("Checking if inline <svg> has an accessible name"),m(e),n=(n=(n=n||!!b(e))||!!h(e))||!!y(e),r(),n||(n=f(e)),t("%c<svg> is accessible: "+n,"font-weight:bold;color:#900;"),l(e,n)}function E(e){e=s(e);let n=window.getComputedStyle(e).background,o=window.getComputedStyle(e).backgroundImage;e.style&&(n.match("url")||o.match("url")||o.match("var"))&&(i("Background image located"),t("Background images do not require accessibility testing."),t("Fading out background image."),e.style.setProperty("background-color","#fffd"),e.style.setProperty("background-blend-mode","color"),r())}function k(e){for(let t of e)a(t)&&(i("<img> located"),N(t),r()),d(t)&&(i("<svg> located"),C(t),r()),E(t)}function T(e){let t=[];return e&&function e(n){let i=n.querySelectorAll("*");for(let o of i){let r;(r=o.nodeType===Node.DOCUMENT_FRAGMENT_NODE?o.getRootNode().host:o).nodeType===Node.ELEMENT_NODE&&t.push(r),o.shadowRoot&&e(o.shadowRoot)}}(e),t}!function e(){i("rha11y-img-checker results");let t=T(document.body);k(t),r()}()})();'
            >rha11y-img-checker</a
          ></strong
        >
      </p>
      <p>
        When run, the rha11y-img-checker bookmarklet identifies all images on a page (including
        inline SVGs and images in the shadow DOM) and returns accessibility information in the
        following ways:
      </p>

      <ol>
        <li>
          All identified and tested images on the page are given 8px outlines:
          <ul>
            <li>
              Blue outline = image passed accessibility checks or is hidden from accessible tech
            </li>
            <li>
              Orange outline = image failed accessibility checks and is not hidden from accessible
              tech
            </li>
            <li>No outline = image was not successfully identified</li>
            <li>Background images are faded to white, as they don't require testing</li>
          </ul>
        </li>
        <li>
          Detailed accessibility test processes and results are displayed in the browser console.
        </li>
      </ol>
      <h2>Test images</h2>
      <h3>Inline SVGs</h3>
      <div class="cards">
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg01"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>Not hidden from screen readers</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg02"
            aria-hidden="true"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>aria-hidden="true"</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg03"
            role="presentation"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>role="presentation"</li>
            <li>Should <strong>fail</strong>, since role="presentation" doesn't hide SVGs.</li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg04"
            role="img"
          >
            <title>Red Hat</title>
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>Has title and img role</li>
            <li>Not hidden from screen readers</li></li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg05"
            aria-label="Red Hat"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>Has aria-label</li>
            <li>Not hidden from screen readers</li></li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 200 145"
            class="redhat-logo"
            id="svg06"
            aria-labelledby="svglabel"
          >
            <path
              d="M127.47 83.49c12.51 0 30.61-2.58 30.61-17.46a14 14 0 0 0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89 8.69 103.76.5 97.51.5 91.69.5 90 8 83.06 8c-6.68 0-11.64-5.6-17.89-5.6-6 0-9.91 4.09-12.93 12.5 0 0-8.41 23.72-9.49 27.16a6.43 6.43 0 0 0-.22 1.94c0 9.22 36.3 39.45 84.94 39.45M160 72.07c1.73 8.19 1.73 9.05 1.73 10.13 0 14-15.74 21.77-36.43 21.77-46.76.03-87.72-27.37-87.72-45.48a18.45 18.45 0 0 1 1.51-7.33C22.27 52 .5 55 .5 74.22c0 31.48 74.59 70.28 133.65 70.28 45.28 0 56.7-20.48 56.7-36.65 0-12.72-11-27.16-30.83-35.78"
              fill="#e00"
            ></path>
          </svg>
          <ul>
            <li>Inline svg</li>
            <li>No title or img role</li>
            <li>Has aria-labelledby: <br /><em id="svglabel">Red Hat</em></li>
            <li>Not hidden from screen readers</li></li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
      </div>
      <h3>Non-shadow JPG &lt;img&gt; elements</h3>
      <div class="cards">
        <div>
          <img src="testimg.jpg?test=img01" />
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <span aria-hidden="true"><img src="testimg.jpg?test=img02" /></span>
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from screen readers</li></li>
            <li>Has hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testimg.jpg?test=img03" alt />
          <ul>
            <li>Has alt (null)</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testimg.jpg?test=img04" alt="People computing" />
          <ul>
            <li>Has alt (with value)</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testimg.jpg?test=img05" role="presentation" />
          <ul>
            <li>Has no alt</li>
            <li>role="presentation"</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
      </div>
      <h3>Non-shadow SVG &lt;img&gt; elements</h3>
      <div class="cards">
        <div>
          <img src="testsvg.svg?test=svg01" />
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <span aria-hidden="true"><img src="testsvg.svg?test=svg02" /></span>
          <ul>
            <li>Has no alt</li>
            <li>Not hidden from screen readers</li></li>
            <li>Has hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testsvg.svg?test=svg03" alt />
          <ul>
            <li>Has alt (null)</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testsvg.svg?test=svg04" alt="People computing" />
          <ul>
            <li>Has alt (with value)</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
        <div>
          <img src="testsvg.svg?test=svg05" role="presentation" />
          <ul>
            <li>Has no alt</li>
            <li>role="presentation"</li>
            <li>No hidden parent</li>
            <li>Should <strong>pass</strong></li>
          </ul>
        </div>
      </div>
      <h3>Shadow &lt;img&gt; elements</h3>
      <div class="cards">
        <div>
          <wc-img></wc-img>
          <ul>
            <li>Image component</li>
            <li>Has no alt</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
        <div>
          <wc-div></wc-div>
          <ul>
            <li>Image component...</li>
            <li>Nested in component...</li>
            <li>In another component</li>
            <li>Has no alt</li>
            <li>Not hidden from screen readers</li></li>
            <li>No hidden parent</li>
            <li>Should <strong>fail</strong></li>
          </ul>
        </div>
      </div>
      <h3>Background image</h3>
      <div class="cards">
        <div>
          <p class="bg-image"></p>
          <ul>
            <li>Should not be tested</li>
          </ul>
        </div>
      </div>
    </div>
    <!--script src="img-checker.js"></script-->
  </body>
</html>
